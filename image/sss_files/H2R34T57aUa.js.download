if (self.CavalryLogger) { CavalryLogger.start_js(["jrRhCKu"]); }

__d("ProfileCometImagePreloader",["Promise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return new(b("Promise"))(function(b){var c=new Image();c.onload=b;c.onerror=b;c.src=a})}function a(a,d){c("promiseDone")(b("Promise").all(a.map(function(a){return h(a)})),d)}g.preloadImages=a}),98);
__d("XCometGroupsCoverPhotoUploaderAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/groups/cover/comet_upload/",{group_id:{type:"FBID",required:!0}})}),null);
__d("useProfileCometPhotoUploader",["AsyncUploadRequest","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useEffect,i=b.useRef;function a(){var a=i([]);h(function(){return function(){a.current&&a.current.forEach(function(a){return a.abort()})}},[]);return function(b,d,e){b=new(c("AsyncUploadRequest"))(b).setAllowCrossOrigin(!0).setFiles({file:d}).setPreventDefaultErrorHandler(!0);var f=e.onFailed,g=e.onSucceeded;g&&b.subscribe("success",function(a,b){a=b.getResponse();if(a==null)throw c("unrecoverableViolation")("Photo upload result should contain a response.","profile_comet");g(a.getPayload())});f&&b.subscribe("failure",function(a,b){a=b.getResponse()||{};b=a.errorDescription;a=a.errorSummary;f({description:b!=null?b.toString():"",summary:a!=null?a.toString():""})});b.send();a.current.push(b)}}g["default"]=a}),98);
__d("GroupsCometCoverPhotoUploader.react",["ProfileCometCoverPhotoEditContext","ProfileCometImagePreloader","XCometGroupsCoverPhotoUploaderAsyncController","react","useCometAlertDialog","useProfileCometPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");b=d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect,l=b.useRef;function a(a){var b=j(c("ProfileCometCoverPhotoEditContext")),e=b.dispatch;b=b.state;var f=l(!1),g=c("useCometAlertDialog")(),m=g[0],n=c("useProfileCometPhotoUploader")(),o=i(function(a){var b,c=(b=a.imageURI)!=null?b:"",f=(b=a.blurredURI)!=null?b:"";d("ProfileCometImagePreloader").preloadImages([c,f],function(){var b;return e({data:{blurredURI:f,height:(b=a.imageHeight)!=null?b:0,id:a.fbid,uri:c,width:(b=a.imageWidth)!=null?b:0},type:"UPLOAD_SUCCESS"})})},[e]),p=i(function(a){m({body:a.description,title:a.summary}),e({type:"UPLOAD_FAILED"})},[e,m]),q=b.file;k(function(){if(!q||f.current)return;var b=c("XCometGroupsCoverPhotoUploaderAsyncController").getURIBuilder().setFBID("group_id",a.groupID).getURI();n(b,q,{onFailed:p,onSucceeded:o});f.current=!0},[q,p,o,a.groupID,n]);return h.jsx("div",{})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);